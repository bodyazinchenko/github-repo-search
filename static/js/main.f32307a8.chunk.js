(this["webpackJsonpgithub-repo-search"]=this["webpackJsonpgithub-repo-search"]||[]).push([[0],{27:function(e,t,a){e.exports=a(53)},33:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(11),c=a.n(s),l=(a(32),a(33),a(14)),i=a.n(l),o=a(22),u=a(23),m=a(24),h=a(6),p=a(25),d=a(26),g=a.n(d);function f(e,t){var a=new URL("".concat("https://api.github.com","/").concat(e));return a.search=new URLSearchParams(t).toString(),function(e,t,a){return fetch(e,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(v).then(E)}(a,"GET")}function v(e){return e.ok?e:e.json().then((function(e){return Promise.reject(new Error(e.message))}))}function E(e){return e.json().then((function(t){return Object(p.a)({},t,{pagination:g()(e.headers.get("link"))})}))}var b=function(){function e(){Object(u.a)(this,e),this.searchFieldValue="",this.errorMessage="",this.loading=!1,this.nothingFound=!1,this.currentPage=1,this.lastPage=1,this.results=[],this.cachedResults=h.g.map()}return Object(m.a)(e,[{key:"searchRepos",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Boolean(t)&&this.resetRepoState(),this.loading=!0,this.nothingFound=!1,this.errorMessage="",e.prev=4,e.next=7,r=this.searchFieldValue,f("search/repositories",{page:this.currentPage,q:r,per_page:30,sort:"stars"});case 7:a=e.sent,this.results=a.items,this.cachedResults.set(this.currentPage,a.items),this.nothingFound=0===a.items.length,Boolean(a.pagination)&&Boolean(a.pagination.last)&&(this.lastPage=Number(a.pagination.last.page)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),this.errorMessage=e.t0.message;case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:case"end":return e.stop()}var r}),e,this,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentPage",value:function(e){this.currentPage=e,this.cachedResults.has(e)?this.results=this.cachedResults.get(e):this.searchRepos()}},{key:"updateSearchFieldValue",value:function(e){this.searchFieldValue=e}},{key:"resetRepoState",value:function(){this.results=[],this.cachedResults.clear(),this.currentPage=1,this.lastPage=1}},{key:"repositories",get:function(){return this.results}},{key:"pages",get:function(){for(var e=[],t=0;t<this.lastPage;t++)e.push(t+1);return e}}]),e}(),y=new(Object(h.e)(b,{searchFieldValue:h.g,loading:h.g,nothingFound:h.g,error:h.g,currentPage:h.g,lastPage:h.g,results:h.g,updateSearchFieldValue:h.b,searchRepos:h.b,updateCurrentPage:h.b,repositories:h.c,pages:h.c})),j=a(8),O=a(54),w=a(55),P=a(56),N=a(66),S=a(57),k=Object(j.a)((function(){var e=Object(r.useContext)(X).searchStore;return n.a.createElement("section",{className:"jumbotron text-center"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"mb-4"},"Search Github Repository"),n.a.createElement(O.a,{inline:!0,onSubmit:function(t){t.preventDefault(),e.searchRepos(!0)},className:"justify-content-center"},n.a.createElement(w.a,null,n.a.createElement(P.a,{bsSize:"lg",type:"text",placeholder:"Enter repository name",value:e.searchFieldValue,onChange:function(t){e.updateSearchFieldValue(t.currentTarget.value)}}),n.a.createElement(N.a,{addonType:"append"},n.a.createElement(S.a,{type:"submit",color:"primary",disabled:0===e.searchFieldValue.length},"Search"))))))})),x=a(58),R=function(){return n.a.createElement("div",{className:"loader-wrap text-center"},n.a.createElement(x.a,{color:"primary"}))},F=a(65),C=function(e){var t=e.type,a=e.text;return n.a.createElement("div",{className:"error-wrap container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-4"},n.a.createElement(F.a,{color:t},a))))},V=a(59),_=a(60),B=a(61);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var T=n.a.createElement("title",null,"star"),z=n.a.createElement("desc",null,"Created with Sketch."),A=n.a.createElement("defs",null),D=n.a.createElement("g",{id:"Octicons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},n.a.createElement("g",{id:"star",fill:"#000000"},n.a.createElement("polygon",{id:"Shape",points:"14 6 9.1 5.36 7 1 4.9 5.36 0 6 3.6 9.26 2.67 14 7 11.67 11.33 14 10.4 9.26"}))),J=function(e){var t=e.svgRef,a=e.title,r=L(e,["svgRef","title"]);return n.a.createElement("svg",M({width:"14px",height:"16px",viewBox:"0 0 14 16",ref:t},r),void 0===a?T:a?n.a.createElement("title",null,a):null,z,A,D)},G=n.a.forwardRef((function(e,t){return n.a.createElement(J,M({svgRef:t},e))})),I=(a.p,a(52),function(e){var t=e.name,a=e.description,r=e.url,s=e.updatedAt,c=e.starsCount,l=e.language;return n.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-4"},n.a.createElement(V.a,{body:!0},n.a.createElement(_.a,null,n.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},t)),n.a.createElement(B.a,null,a),n.a.createElement("div",{className:"repo-summary"},n.a.createElement("div",{className:"mr-4 repo-stars"},n.a.createElement(G,null),n.a.createElement("span",{className:"ml-2"},c)),n.a.createElement("div",{className:"mr-4"},n.a.createElement("span",{className:"badge badge-info"},l)),n.a.createElement("div",null,"Last update: ",new Date(s).toLocaleDateString()))))}),U=a(62),q=a(63),W=a(64),H=Object(j.a)((function(){var e=Object(r.useContext)(X).searchStore;return n.a.createElement("div",{className:"container-fluid"},n.a.createElement(U.a,{size:"md","aria-label":"Pagination"},e.pages.map((function(t){return n.a.createElement(q.a,{key:t,active:e.currentPage===t},n.a.createElement(W.a,{href:"#",onClick:function(){return a=t,void(e.currentPage!==a&&e.updateCurrentPage(a));var a}},t))}))))})),K=Object(j.a)((function(){var e=Object(r.useContext)(X).searchStore;return e.loading?n.a.createElement(R,null):e.errorMessage?n.a.createElement(C,{text:e.errorMessage,type:"danger"}):e.nothingFound?n.a.createElement(C,{text:"Not found",type:"warning"}):n.a.createElement(n.a.Fragment,null,e.repositories.length>0&&n.a.createElement("div",{className:"container-fluid repos-wrap"},n.a.createElement("div",{className:"row"},e.repositories.map((function(e){return n.a.createElement(I,{key:e.id,name:e.full_name,description:e.description,url:e.html_url,updatedAt:e.updated_at,starsCount:e.stargazers_count,language:e.language})}))),n.a.createElement("div",{className:"row"},n.a.createElement(H,null))))})),Q=function(){return n.a.createElement("main",{role:"main"},n.a.createElement(k,null),n.a.createElement("div",{className:"search-results-wrap py-5"},n.a.createElement(K,null)))};a.d(t,"RootContext",(function(){return X}));var X=Object(r.createContext)({});c.a.render(n.a.createElement(X.Provider,{value:{searchStore:y}},n.a.createElement(Q,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.f32307a8.chunk.js.map